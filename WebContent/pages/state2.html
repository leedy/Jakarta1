<!DOCTYPE html> 
<html lang="en"> 
<head> 
    <meta charset="UTF-8"> 
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
    <title>REST Data Table</title> 
    <style> 
        table { 
            width: 100%; 
            border-collapse: collapse; 
        } 
        th, td { 
            border: 1px solid #ddd; 
            padding: 8px; 
        } 
        th { 
            background-color: #f2f2f2; 
        } 
        #stateDropdown { 
            margin-bottom: 20px; 
        } 
    </style> 
</head> 
<body> 
    <h1>REST API Data Table</h1> 
    <select id="stateDropdown"> 
        <option value="">Select a state</option> 
        <option value="AL">Alabama</option> 
        <option value="AK">Alaska</option> 
        <option value="AZ">Arizona</option> 
        <option value="AR">Arkansas</option> 
        <option value="CA">California</option> 
        <option value="CO">Colorado</option> 
        <option value="CT">Connecticut</option> 
        <option value="DE">Delaware</option> 
        <option value="FL">Florida</option> 
        <option value="GA">Georgia</option> 
        <option value="HI">Hawaii</option> 
        <option value="ID">Idaho</option> 
        <option value="IL">Illinois</option> 
        <option value="IN">Indiana</option> 
        <option value="IA">Iowa</option> 
        <option value="KS">Kansas</option> 
        <option value="KY">Kentucky</option> 
        <option value="LA">Louisiana</option> 
        <option value="ME">Maine</option> 
        <option value="MD">Maryland</option> 
        <option value="MA">Massachusetts</option> 
        <option value="MI">Michigan</option> 
        <option value="MN">Minnesota</option> 
        <option value="MS">Mississippi</option> 
        <option value="MO">Missouri</option> 
        <option value="MT">Montana</option> 
        <option value="NE">Nebraska</option> 
        <option value="NV">Nevada</option> 
        <option value="NH">New Hampshire</option> 
        <option value="NJ">New Jersey</option> 
        <option value="NM">New Mexico</option> 
        <option value="NY">New York</option> 
        <option value="NC">North Carolina</option> 
        <option value="ND">North Dakota</option> 
        <option value="OH">Ohio</option> 
        <option value="OK">Oklahoma</option> 
        <option value="OR">Oregon</option> 
        <option value="PA">Pennsylvania</option> 
        <option value="RI">Rhode Island</option> 
        <option value="SC">South Carolina</option> 
        <option value="SD">South Dakota</option> 
        <option value="TN">Tennessee</option> 
        <option value="TX">Texas</option> 
        <option value="UT">Utah</option> 
        <option value="VT">Vermont</option> 
        <option value="VA">Virginia</option> 
        <option value="WA">Washington</option> 
        <option value="WV">West Virginia</option> 
        <option value="WI">Wisconsin</option> 
        <option value="WY">Wyoming</option> 
    </select> 
    <button onclick="search()">Search</button> 
    <table id="dataTable"> 
        <thead> 
            <tr> 
                <th data-key="lastName">Last Name</th> 
                <th data-key="firstName">First Name</th>             
                <th data-key="state">State</th> 
                <th data-key="number">Number</th>
                <th data-key="unid">UNID</th>
            </tr> 
        </thead> 
        <tbody> 
            <!-- Rows will be inserted here --> 
        </tbody> 
    </table> 
  
    <script> 
        // Function to fetch data from REST API 
        async function fetchData(stateAbbreviation) { 
           	 const url = `https://xbossdev3.mbre.local/dave/fakenames.nsf/xsp/app/state?state=${encodeURIComponent(stateAbbreviation)}`; 
              
            try { 
                const response = await fetch(url); 
                if (!response.ok) { 
                    throw new Error(`HTTP error! status: ${response.status}`); 
                } 
                const jsonData = await response.json(); 
                populateTable(jsonData.byQueryState); 
            } catch (error) { 
                console.error('Error fetching data:', error); 
            } 
        } 
  
        // Function to create table rows from JSON data 
        function populateTable(data) { 
            const tableBody = document.getElementById('dataTable').getElementsByTagName('tbody')[0]; 
            tableBody.innerHTML = ''; // Clear existing data 
  
            // Get the order of keys from the table headers 
            const headers = Array.from(document.querySelectorAll('#dataTable thead th')); 
            const headerKeys = headers.map(header => header.getAttribute('data-key')); 
  
            data.forEach(person => { 
                const row = document.createElement('tr'); 
  
                headerKeys.forEach(key => { 
                    const cell = document.createElement('td'); 
                    cell.textContent = person[key] || ''; // Use empty string if key is not found 
                    row.appendChild(cell); 
                }); 
  
                tableBody.appendChild(row); 
            }); 
        } 
  
        // Function to handle search 
        function search() { 
            const stateDropdown = document.getElementById('stateDropdown'); 
            const selectedState = stateDropdown.value; 
            if (selectedState) { 
                fetchData(selectedState); 
            } else { 
                alert("Please select a state."); 
            } 
        } 
  
        // Fetch and display data when the page loads with an initial empty query 
        fetchData(''); 
    </script> 
</body> 
</html>